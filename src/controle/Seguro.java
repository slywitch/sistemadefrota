/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controle;

import classes.ConexaoAccess;
import classes.Funcoes;
import java.awt.Dimension;
import java.awt.event.KeyEvent;
import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import javax.swing.JDesktopPane;
import javax.swing.JOptionPane;

/**
 *
 * @author Jeferson
 */
public class Seguro extends javax.swing.JInternalFrame {

    private ConexaoAccess Conexao;
    private Funcoes Fun;
    
    /**
     * Creates new form Seguro
     */
    public Seguro() {
        initComponents();
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Seguro().setVisible(true);
            }
        });
    }

    public void centralizar(JDesktopPane dp) {
        Dimension ds = dp.getSize();
        Dimension dw = this.getSize();
        this.setLocation((ds.width - dw.width) / 2, (ds.height - dw.height) / 2);
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jtfFornecedorCod = new javax.swing.JFormattedTextField();
        jtfNomeFornecedor = new javax.swing.JFormattedTextField();
        jlbSegurado = new javax.swing.JLabel();
        jtfCodSegurado = new javax.swing.JFormattedTextField();
        jtfNomeSegurado = new javax.swing.JFormattedTextField();
        jlbNumApolice = new javax.swing.JLabel();
        jtfNumApolice = new javax.swing.JFormattedTextField();
        jlbVigencia = new javax.swing.JLabel();
        jdcVigencia = new com.toedter.calendar.JDateChooser();
        jtfPlaca = new javax.swing.JFormattedTextField();
        jlbVeiculo = new javax.swing.JLabel();
        jtfVeiculo = new javax.swing.JFormattedTextField();
        jbtPesquisar = new javax.swing.JButton();
        jbtSalvar = new javax.swing.JButton();
        jbtExcluir = new javax.swing.JButton();
        jbtNovo = new javax.swing.JButton();

        setClosable(true);
        setTitle("Seguro");

        jLabel1.setText("Fornecedor (F12)");

        jtfFornecedorCod.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtfFornecedorCodKeyPressed(evt);
            }
        });

        jtfNomeFornecedor.setEnabled(false);

        jlbSegurado.setText("Segurado (F12)");

        jtfCodSegurado.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtfCodSeguradoKeyPressed(evt);
            }
        });

        jtfNomeSegurado.setEnabled(false);

        jlbNumApolice.setText("Nº da Apólice");

        jtfNumApolice.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtfNumApoliceKeyPressed(evt);
            }
        });

        jlbVigencia.setText("Vigência");

        jtfPlaca.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtfPlacaKeyPressed(evt);
            }
        });

        jlbVeiculo.setText("Veículo (F12)");

        jtfVeiculo.setEnabled(false);

        jbtPesquisar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagens/Pesquisa.png"))); // NOI18N
        jbtPesquisar.setText("Pesquisar");
        jbtPesquisar.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jbtPesquisar.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jbtPesquisar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtPesquisarActionPerformed(evt);
            }
        });

        jbtSalvar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagens/Salvar.png"))); // NOI18N
        jbtSalvar.setText("Salvar");
        jbtSalvar.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jbtSalvar.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jbtSalvar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtSalvarActionPerformed(evt);
            }
        });

        jbtExcluir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagens/Excluir.png"))); // NOI18N
        jbtExcluir.setText("Excluir");
        jbtExcluir.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jbtExcluir.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jbtExcluir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtExcluirActionPerformed(evt);
            }
        });

        jbtNovo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagens/Novo.png"))); // NOI18N
        jbtNovo.setText("Novo");
        jbtNovo.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jbtNovo.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jbtNovo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtNovoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jlbSegurado)
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jtfCodSegurado, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(jdcVigencia, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(jtfNomeSegurado, javax.swing.GroupLayout.PREFERRED_SIZE, 428, javax.swing.GroupLayout.PREFERRED_SIZE))))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addComponent(jbtNovo)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jbtSalvar)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jbtExcluir)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jbtPesquisar)
                                .addContainerGap())))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(jlbVeiculo)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(jtfPlaca, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jlbNumApolice, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jtfFornecedorCod)
                                    .addComponent(jtfNumApolice, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 147, Short.MAX_VALUE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jlbVigencia)
                                    .addComponent(jtfVeiculo, javax.swing.GroupLayout.DEFAULT_SIZE, 428, Short.MAX_VALUE)
                                    .addComponent(jtfNomeFornecedor))))
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jlbNumApolice)
                    .addComponent(jlbVigencia))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jtfNumApolice, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jdcVigencia, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jlbSegurado)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtfCodSegurado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtfNomeSegurado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jlbVeiculo)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtfPlaca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtfVeiculo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtfFornecedorCod, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtfNomeFornecedor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jbtSalvar)
                        .addComponent(jbtNovo))
                    .addComponent(jbtExcluir)
                    .addComponent(jbtPesquisar))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jbtPesquisarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtPesquisarActionPerformed

        PesquisaSeguro A = new PesquisaSeguro();
        A.setVisible(true);
        JDesktopPane JDP = this.getDesktopPane();
        JDP.add(A);
        A.centralizar(JDP);
        try{
            A.Validador("Seguro");
            A.setSelected(true);
            A.SetPequisaSeguro(this);
        }catch (Exception E){
            JOptionPane.showMessageDialog(null, "Erro: " + E);
        }
        A.setVisible(true);

    }//GEN-LAST:event_jbtPesquisarActionPerformed

    private void jbtSalvarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtSalvarActionPerformed

        Conexao = new ConexaoAccess();
        Conexao.Conectar();
        Conexao.setSQL("select * from t_seguro where num_apolice = '" + jtfNumApolice.getText() + "' ");
        ResultSet RS = Conexao.Consultar();

        try {
            if(RS.next()){
                String SQL;
                
                SQL = "update t_seguro set vigencia = '" + jdcVigencia.getDate() + "', segurado_cod = '" + jtfCodSegurado.getText() + "', ";
                SQL = SQL + "veiculo_cod = '" + jtfPlaca.getText() + "', fornecedor_cod = " + jtfFornecedorCod.getText() + " ";
                SQL = SQL + "where num_apolice = '" + jtfNumApolice.getText() + "'";
                
                Conexao.setSQL(SQL);
                Conexao.Executar();
            } else {
                String SQL;

                SQL = "insert into t_seguro (num_apolice, vigencia, segurado_cod, veiculo_cod, fornecedor_cod) values ('";
                SQL = SQL + jtfNumApolice.getText() + "', '" + jdcVigencia.getDate() + "', '";
                SQL = SQL + jtfCodSegurado.getText() + "', '" + jtfPlaca.getText() + "', " + jtfFornecedorCod.getText() + ") ";
                
                Conexao.setSQL(SQL);
                Conexao.Executar();
            }

        } catch (Exception Erro){
            JOptionPane.showMessageDialog(null, "Erro na validação: " + Erro);
        }

        Conexao.Desconectar();

        Limpar();

        jtfNumApolice.requestFocus();

    }//GEN-LAST:event_jbtSalvarActionPerformed

    private void jbtExcluirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtExcluirActionPerformed

        Object[] botoes = { "Sim", "Não" };

        int resposta;

        resposta = JOptionPane.showOptionDialog(null, "Você deseja realmente excluir este registro?", "Confirma exclusão", JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE, null, botoes, botoes[0]);

        if(resposta == JOptionPane.YES_OPTION){

            String SQL = "update t_veiculo set exclusao = 1 where chassis = '" + jtfNumApolice.getText() + "'";

            Conexao = new ConexaoAccess();
            Conexao.Conectar();
            Conexao.setSQL(SQL);
            Conexao.Executar();
            Conexao.Desconectar();

            Limpar();

        }

        jtfNumApolice.requestFocus();

    }//GEN-LAST:event_jbtExcluirActionPerformed

    private void jbtNovoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtNovoActionPerformed

        Limpar();

        jtfNumApolice.requestFocus();

    }//GEN-LAST:event_jbtNovoActionPerformed

    private void jtfCodSeguradoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtfCodSeguradoKeyPressed
        
        if(evt.getKeyCode() == KeyEvent.VK_ENTER){
            FuncaoGenerica("Segurado", jtfCodSegurado.getText());
        }

        if(evt.getKeyCode() == KeyEvent.VK_F12){
            SubPesquisaSeguro A = new SubPesquisaSeguro();
            A.setVisible(true);
            JDesktopPane JDP = this.getDesktopPane();
            JDP.add(A);
            A.centralizar(JDP);
            try{
                A.setSelected(true);
                A.SetSubPequisaSeguro(this);
                A.Validador("Segurado");
            }catch (Exception E){
                JOptionPane.showMessageDialog(null, "Erro: " + E);
            }
            A.setVisible(true);
        }
        
    }//GEN-LAST:event_jtfCodSeguradoKeyPressed

    private void jtfPlacaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtfPlacaKeyPressed
        
        if(evt.getKeyCode() == KeyEvent.VK_ENTER){
            FuncaoGenerica("Veiculo", jtfPlaca.getText());
        }

        if(evt.getKeyCode() == KeyEvent.VK_F12){
            SubPesquisaSeguro A = new SubPesquisaSeguro();
            A.setVisible(true);
            JDesktopPane JDP = this.getDesktopPane();
            JDP.add(A);
            A.centralizar(JDP);
            try{
                A.setSelected(true);
                A.SetSubPequisaSeguro(this);
                A.Validador("Veiculo");
            }catch (Exception E){
                JOptionPane.showMessageDialog(null, "Erro: " + E);
            }
            A.setVisible(true);
        }
        
    }//GEN-LAST:event_jtfPlacaKeyPressed

    private void jtfFornecedorCodKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtfFornecedorCodKeyPressed
        
        if(evt.getKeyCode() == KeyEvent.VK_ENTER){
            FuncaoGenerica("Fornecedor", jtfFornecedorCod.getText());
        }

        if(evt.getKeyCode() == KeyEvent.VK_F12){
            SubPesquisaSeguro A = new SubPesquisaSeguro();
            A.setVisible(true);
            JDesktopPane JDP = this.getDesktopPane();
            JDP.add(A);
            A.centralizar(JDP);
            try{
                A.setSelected(true);
                A.SetSubPequisaSeguro(this);
                A.Validador("Fornecedor");
            }catch (Exception E){
                JOptionPane.showMessageDialog(null, "Erro: " + E);
            }
            A.setVisible(true);
        }
                
    }//GEN-LAST:event_jtfFornecedorCodKeyPressed

    private void jtfNumApoliceKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtfNumApoliceKeyPressed

        if(evt.getKeyCode() == KeyEvent.VK_ENTER){
//            FuncaoGenerica("Fornecedor", jtfFornecedorCod.getText());
            CarregaDados(jtfNumApolice.getText());
        }

//        if(evt.getKeyCode() == KeyEvent.VK_F12){
//            SubPesquisaSeguro A = new SubPesquisaSeguro();
//            A.setVisible(true);
//            JDesktopPane JDP = this.getDesktopPane();
//            JDP.add(A);
//            A.centralizar(JDP);
//            try{
//                A.setSelected(true);
//                A.SetSubPequisaSeguro(this);
//                A.Validador("Fornecedor");
//            }catch (Exception E){
//                JOptionPane.showMessageDialog(null, "Erro: " + E);
//            }
//            A.setVisible(true);
//        }
        
    }//GEN-LAST:event_jtfNumApoliceKeyPressed

    public void FuncaoGenerica(String Opcao, String Valor){
     
        String SQL=null;
        
        if (Opcao.equals("Segurado")){
            SQL = "select cnpj, nome from t_empresa where cnpj = '" + Valor+ "' ";
        } else if (Opcao.equals("Veiculo")){
            SQL = "select tve.chassis, (tmo.nome) as nome ";
            SQL = SQL + "from t_veiculo tve ";
            SQL = SQL + "inner join t_modelo tmo on tmo.codigo = tve.modelo_cod ";            
            SQL = SQL + "where chassis = '" + Valor + "' and tve.exclusao = 0 ";         
        } else if (Opcao.equals("Fornecedor")){
            SQL = "select cnpjcpf, (nomefantasia) as nome from t_fornecedor where cnpjcpf = '" + Valor + "' ";   
        }
            
        Fun = new Funcoes();
        if (Opcao.equals("Segurado")){
            jtfCodSegurado.setText(Valor);
            jtfNomeSegurado.setText(Fun.FuncaoGenerica(SQL));
        } else if (Opcao.equals("Veiculo")){
            jtfPlaca.setText(Valor);
            jtfVeiculo.setText(Fun.FuncaoGenerica(SQL));    
        } else if (Opcao.equals("Fornecedor")){
            jtfFornecedorCod.setText(Valor);
            jtfNomeFornecedor.setText(Fun.FuncaoGenerica(SQL));
        }
                
    }
    
    private void Limpar(){
        
        jtfNumApolice.setText("");
        jdcVigencia.setDate(null);
        jtfCodSegurado.setText("");
        jtfNomeSegurado.setText("");
        jtfPlaca.setText("");
        jtfVeiculo.setText("");
        jtfFornecedorCod.setText("");
        jtfNomeFornecedor.setText("");
        
    }
    
    public void CarregaDados(String Codigo){

        String SQL;
        String Modelo;
        
        SQL = "select seg.num_apolice, to_char(seg.vigencia,'DD/MM/YYYY') as str_vigencia, seg.segurado_cod, seg.veiculo_cod, seg.fornecedor_cod, ";
        SQL = SQL + "tfo.nomefornecedor, tem.cnpj, tem.nomefantasia, ";
        SQL = SQL + "tve.placa, tve.ano, (tmo.nome) as modelo ";
//        SQL = SQL + "";
        SQL = SQL + "from t_seguro seg ";
        SQL = SQL + "inner join t_veiculo tve on tve.chassis = seg.veiculo_cod ";
        SQL = SQL + "inner join t_fornecedor tfo on tfo.cnpjcpf  = seg.fornecedor_cod ";
        SQL = SQL + "inner join t_empresa tem on tem.cnpj = seg.segurado_cod ";
        SQL = SQL + "inner join t_modelo tmo on tmo.codigo = tve.modelo_cod ";
//        SQL = SQL + "";
//        SQL = SQL + "";
        SQL = SQL + "where seg.num_apolice = '" + Codigo + "'";

        Conexao = new ConexaoAccess();
        Conexao.Conectar() ;
        Conexao.setSQL(SQL);
        
        System.out.println(SQL);

        ResultSet RS = Conexao.Consultar();

        try{
            if (RS.next()){
                jtfNumApolice.setText(RS.getString("num_apolice"));
                
                String Vigencia = RS.getString("str_vigencia");
                java.util.Date vigencia = new SimpleDateFormat("dd/MM/yyyy").parse(Vigencia);
                jdcVigencia.setDate(vigencia);

                jtfCodSegurado.setText(RS.getString("segurado_cod"));
                jtfNomeSegurado.setText(RS.getString("nomefantasia"));
                jtfPlaca.setText(RS.getString("veiculo_cod"));                
                Modelo = RS.getString("ano") + " - " + RS.getString("modelo");
                jtfVeiculo.setText(Modelo);                
                jtfFornecedorCod.setText(RS.getString("fornecedor_cod"));
                jtfNomeFornecedor.setText(RS.getString("nomefornecedor"));

//                Fun = new Funcoes();
//                jtfNomeCidade.setText(Fun.NomeCidade(Integer.parseInt(jtfCidade_Cod.getText())));
//                jtfEstado.setText(Fun.SiglaEstado(Integer.parseInt(jtfCidade_Cod.getText())));

                
            }
        }catch (Exception Erro){
            JOptionPane.showMessageDialog(null, "Erro na validação: " + Erro);
        }
        
        jtfNumApolice.requestFocus();
        Conexao.Desconectar();

    }
    
    private void Segurado(){

        if (!(jtfCodSegurado.getText().equals(""))){

            String codSegurado = jtfCodSegurado.getText();

            Fun = new Funcoes();
            jtfNomeSegurado.setText(Fun.Marca(Integer.parseInt(codSegurado)));

        }

    }

    private void Veículo(){

        if (!(jtfPlaca.getText().equals(""))){

            String codVeiculo = jtfPlaca.getText();

            Fun = new Funcoes();
            jtfVeiculo.setText(Fun.Carroceria(Integer.parseInt(codVeiculo)));

        }

    }
    
    private void Fornecedor(){

        if (!(jtfFornecedorCod.getText().equals(""))){

            String codFornecedor = jtfFornecedorCod.getText();

            Fun = new Funcoes();
            jtfNomeFornecedor.setText(Fun.Especie(Integer.parseInt(codFornecedor)));

        }

    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JButton jbtExcluir;
    private javax.swing.JButton jbtNovo;
    private javax.swing.JButton jbtPesquisar;
    private javax.swing.JButton jbtSalvar;
    private com.toedter.calendar.JDateChooser jdcVigencia;
    private javax.swing.JLabel jlbNumApolice;
    private javax.swing.JLabel jlbSegurado;
    private javax.swing.JLabel jlbVeiculo;
    private javax.swing.JLabel jlbVigencia;
    private javax.swing.JFormattedTextField jtfCodSegurado;
    private javax.swing.JFormattedTextField jtfFornecedorCod;
    private javax.swing.JFormattedTextField jtfNomeFornecedor;
    private javax.swing.JFormattedTextField jtfNomeSegurado;
    private javax.swing.JFormattedTextField jtfNumApolice;
    private javax.swing.JFormattedTextField jtfPlaca;
    private javax.swing.JFormattedTextField jtfVeiculo;
    // End of variables declaration//GEN-END:variables
}
